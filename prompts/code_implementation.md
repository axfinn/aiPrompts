# 代码实现 Prompts

## 通用编程任务

### 代码解释

```text
请解释以下代码的作用和实现原理：

[在此处插入代码]

请用简洁易懂的语言解释，包括：
1. 代码的主要功能
2. 关键算法或逻辑
3. 时间/空间复杂度（如果适用）
4. 可能的优化方向
```

### 代码优化

```text
请帮我优化以下代码：

[在此处插入代码]

优化要求：
1. 提高代码性能
2. 增强代码可读性
3. 遵循最佳实践
4. 添加必要的注释
```

### 代码调试

```text
以下代码存在错误，请帮我找出并修复：

[在此处插入代码]

错误现象：
[描述运行结果或错误信息]

请提供：
1. 错误定位和原因分析
2. 修复后的完整代码
3. 测试用例验证
```

### 代码重构

```text
请帮我重构以下代码，提高其质量和可维护性：

[在此处插入代码]

重构要求：
1. 改善代码结构和组织
2. 消除代码重复
3. 提高可读性和可维护性
4. 遵循设计原则（如SOLID原则）
```

### 重构分层建议

```text
模块： [名称]
现状问题： [冗余/耦合/难测试]

请：
1. 标识领域逻辑 / 基础设施 / 接口 交织点
2. 给出分层/抽象重组方案（表格/清单）
3. 渐进式迁移批次划分
4. 风险与回滚策略
```

### 设计权衡分析

```text
需求： [描述]
候选方案： [方案A / 方案B / 方案C]
约束： [性能 / 成本 / 复杂度]

请：
1. 维度评分矩阵（可维护性/扩展性/性能/学习成本）
2. 推荐方案与理由
3. 可能的演进路径
4. 不采纳方案的弃用理由记录
```

## 特定任务

### 算法实现

```text
请用 [编程语言] 实现 [算法名称] 算法。

要求：
1. 完整的函数实现
2. 详细的注释说明关键步骤
3. 提供时间复杂度和空间复杂度分析
4. 包含测试用例
```

### 数据结构实现

```text
请用 [编程语言] 实现 [数据结构名称] 数据结构。

要求：
1. 完整的类/结构体定义
2. 所有核心方法的实现
3. 详细的注释说明每个方法的功能
4. 提供使用示例
```

### 设计模式实现

```text
请用 [编程语言] 实现 [设计模式名称] 设计模式。

要求：
1. 完整的代码实现
2. 说明模式的核心思想
3. 解释代码中如何体现该设计模式
4. 提供使用场景和优缺点分析
```

### 并发控制与线程安全

```text
语言： [Go / Java / Rust / ...]
场景： [共享缓存 / 任务队列 / 原子计数]

请：
1. 识别数据竞争点
2. 推荐同步原语（锁 / CAS / Channel / Actor）
3. 示例实现与可扩展性说明
4. 死锁/饥饿/活锁预防策略
```

### 性能分析与剖析

```text
目标模块： [名称]
症状： [CPU 高 / 内存泄漏 / 延迟大]

请：
1. 建立性能假设列表
2. 推荐分析工具链（如 pprof/async-profiler/valgrind）
3. 数据采集步骤
4. 优化前后验证指标模板
```

### 内存与对象生命周期管理

```text
语言： [Java / Go / C++]
问题： [频繁 GC / 内存碎片 / 泄漏]

请：
1. 可能根因枚举
2. 诊断步骤（命令/工具）
3. 优化策略（池化/逃逸分析/结构压缩）
4. 验收指标与回归监控
```

### 输入校验与防御式编程

```text
接口/函数： [名称]
风险： [非法参数 / 注入 / 边界条件]

请：
1. 校验顺序与早失败策略
2. 错误分类与返回结构统一
3. 防御式检查 vs 断言使用准则
4. 示例代码与测试用例
```

## 项目开发

### API 设计

```text
请为 [功能描述] 设计 RESTful API。

要求：
1. 完整的 API 路径和方法
2. 请求/响应数据结构
3. 状态码定义
4. 错误处理机制
5. 使用 [编程语言/框架] 实现
```

### 数据库设计

```text
请为 [应用场景] 设计数据库结构。

要求：
1. ER 图或表结构说明
2. 字段类型和约束
3. 索引设计
4. 使用 [数据库类型] 实现建表语句
```

### 完整项目结构

```text
请为 [项目类型] 设计项目结构。

要求：
1. 目录结构和文件组织
2. 各模块功能说明
3. 技术选型理由
4. 使用 [编程语言/框架] 实现
5. 遵循 Git 开发流程规范：
   - 所有新功能开发必须在新建的功能分支上进行
   - 开发完成后必须进行代码审查（CR）
   - 审核通过后才能将功能分支合并到主分支
   - 禁止直接在主分支上进行开发
   - 项目采用版本管理，只有在CR通过并合并到主分支时才会触发版本变更
```

### 测试策略

```text
请为 [项目/功能] 设计测试策略。

要求：
1. 测试类型（单元测试、集成测试、端到端测试等）
2. 测试框架选择建议
3. 关键测试场景识别
4. 测试数据准备方案
```

### 代码可观测性植入

```text
服务/模块： [名称]
当前状态： [无指标 / 仅日志 / 部分 Trace]

请：
1. 定义指标分类（业务/性能/容量/错误）
2. 埋点位置建议（入口/外部调用/慢操作）
3. 日志结构化字段规范
4. Trace 与日志关联策略
```

### 安全基线检查

```text
范围： [应用 / 库 / 服务]

请：
1. 依赖安全扫描要点
2. 密钥/凭据使用与替换策略
3. 输入/输出安全过滤点列表
4. 安全回归测试用例清单
```

### 技术债登记与治理

```text
发现的技术债： [列表]
影响： [性能 / 可维护 / 风险]

请：
1. 分类（代码质量 / 架构 / 性能 / 安全 / 测试缺失）
2. 量化指标（影响范围 / 修复成本 / 风险等级）
3. 治理优先级排序规则
4. Sprint 渐进消化计划
```

## 代码审查与质量

### 代码审查要点生成

```text
改动描述： [功能/修复]
关键文件： [列表]

请：
1. 功能正确性检查点
2. 性能/复杂度关注点
3. 资源释放与异常处理检查
4. 可读性与一致性建议
5. 安全风险提示
```

### 复杂度与可维护性分析

```text
代码位置： [文件/模块]

请：
1. 计算或估算函数/模块的圈复杂度
2. 标识高风险长函数/大类
3. 拆分与重构建议（含优先级）
4. 改动后度量指标目标
```

### 风险评估与回滚设计

```text
改动类型： [功能新增 / 重构 / 替换核心组件]
耦合点： [列出]

请：
1. 风险源分类（逻辑/数据/性能/兼容）
2. 监控与探针要求清单
3. 回滚路径（代码 / 配置 / 数据）
4. 验收与观察期指标
```

## 示例请求模板

```text
当我描述：
背景：<业务/技术场景>
目标：<性能 / 稳定 / 架构 / 安全>
约束：<时间 / 人力 / 历史包袱>
输出：请按（现状诊断 -> 问题拆解 -> 备选方案 -> 推荐方案 -> 风险与缓解 -> 验收标准）结构生成
```