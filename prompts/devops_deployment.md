# DevOps 和部署 Prompts

## 容器化

### Docker 配置
```
请为 [应用类型] 编写 Dockerfile：

要求：
1. 使用合适的官方基础镜像
2. 遵循最佳实践（多阶段构建、安全考虑等）
3. 设置必要的环境变量
4. 正确暴露端口
5. 定义启动命令
6. 提供构建和运行说明
```

### Docker Compose 编排
```
请用 Docker Compose 编排 [应用架构，如"前端+后端+数据库"]：

服务包括：
1. [服务1，如前端应用]
2. [服务2，如后端API]
3. [服务3，如数据库]

要求：
1. 各服务间的网络配置
2. 数据持久化处理
3. 环境变量管理
4. 健康检查配置
5. 启动顺序控制
```

## CI/CD 流水线

### GitHub Actions
```
请为 [项目类型] 编写 GitHub Actions 工作流：

工作流应包括：
1. 代码检查（Linting）
2. 运行测试
3. 构建 Docker 镜像
4. 推送镜像到 [镜像仓库，如 Docker Hub/GitHub Packages]
5. 部署到 [环境，如测试环境/生产环境]

要求：
1. 合理使用缓存提高效率
2. 设置适当的触发条件
3. 错误处理和通知机制
```

### GitLab CI/CD
```
请为 [项目类型] 编写 GitLab CI/CD 配置：

流水线阶段：
1. 安装依赖
2. 代码质量检查
3. 运行测试（单元测试、集成测试）
4. 构建和推送镜像
5. 部署到 [环境]

要求：
1. 使用 GitLab 提供的特性（如模板、变量等）
2. 并行处理提高效率
3. 环境差异化配置
```

## 基础设施即代码

### Terraform 配置
```
请用 Terraform 为 [云服务商，如 AWS/Azure/GCP] 编写基础设施配置：

资源包括：
1. [计算资源，如虚拟机/容器服务]
2. [网络资源，如 VPC、负载均衡器]
3. [存储资源，如对象存储、数据库]
4. [安全资源，如安全组、IAM 角色]

要求：
1. 模块化设计
2. 环境差异化配置
3. 安全最佳实践
4. 成本优化考虑
```

### Kubernetes 配置
```
请为 [应用类型] 编写 Kubernetes 部署配置：

资源包括：
1. Deployment 配置
2. Service 配置
3. Ingress 配置（如需要）
4. ConfigMap 和 Secret 配置
5. PersistentVolume 配置（如需要）

要求：
1. 健康检查探针
2. 资源限制和请求
3. 滚动更新策略
4. 配置和密钥管理
```

## 监控和日志

### Prometheus 监控
```
请为 [应用类型] 配置 Prometheus 监控：

要求：
1. 应用指标暴露（如使用 [客户端库]）
2. Prometheus 抓取配置
3. 常用指标收集（如请求延迟、错误率等）
4. 告警规则定义
5. Grafana 仪表板配置
```

### ELK 日志系统
```
请搭建 ELK（Elasticsearch, Logstash, Kibana）日志收集系统：

要求：
1. 应用日志收集配置
2. Logstash 解析规则
3. Elasticsearch 索引策略
4. Kibana 可视化配置
5. 在 [部署环境] 中的部署方案
```

## 安全加固

### 安全扫描
```
请为 [项目类型] 配置安全扫描流程：

包括：
1. 依赖安全扫描（如 Snyk、Dependabot）
2. 容器镜像安全扫描
3. 代码安全扫描（如 SonarQube）
4. 基础设施安全检查
5. 在 CI/CD 流水线中集成
```

### 零信任网络
```
请为 [系统架构] 设计零信任安全模型：

要求：
1. 身份验证和授权机制
2. 网络分段和微隔离
3. 服务间通信加密
4. 持续验证和监控
5. 在 [部署环境] 中的实现方案
```